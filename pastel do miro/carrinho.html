<!DOCTYPE html>
<html lang="pt-br">
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>Pastel e Caldo de Cana do Miro</title>

   <!-- bootstrap css -->
   <link rel="stylesheet" href="css/bootstrap.min.css">
   <link rel="stylesheet" href="css/style.css">
   <link rel="stylesheet" href="css/responsive.css">
   <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
   <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"> 
   <link rel="icon" href="images/fevicon.png" type="image/gif" />
   <style>
      .btn-vermelho { background-color: #c00; color: #fff; border: none; margin-left: 5px;}
      .btn-vermelho:hover { background-color: #a00; color: #fff; }
      .item { margin-bottom: 10px; }
      .quantidade { display:flex; align-items:center; gap:5px; }
      .quantidade button { width:30px; height:30px; border:none; background:#c00; color:#fff; cursor:pointer;}
      .quantidade span { width:30px; display:inline-block; text-align:center;}
   </style>
</head>
<body class="main-layout">
   <!-- Header -->
   <header>
      <div class="header">
         <div class="head_top">
            <div class="container">
               <div class="row">
                  <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                     <div class="top-box">
                        <ul class="sociel_link">
                           <li> <a href="#"><i class="fab fa-facebook-f"></i></a></li>
                           <li> <a href="#"><i class="fab fa-instagram"></i></a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12">
                     <div class="top-box">
                        <p>Desde 1999. O melhor pastel da orla. </p>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="container">
            <div class="row">
               <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                  <div class="full">
                     <div class="center-desk">
                        <div class="logo"> <a href="index.html"><img src="images/logo.jpg" alt="logo"/></a> </div>
                     </div>
                  </div>
               </div>
               <div class="col-xl-7 col-lg-7 col-md-9 col-sm-9">
                  <div class="menu-area">
                     <div class="limit-box">
                        <nav class="main-menu">
                           <ul class="menu-area-main">
                              <li> <a href="index.html">Inicio</a> </li>
                              <li> <a href="sobre.html">Sobre</a> </li>
                              <li> <a href="cardapio.html">Cardápio</a> </li>
                              <li class="active"> <a href="carrinho.html">Carrinho</a> </li>
                              <li> <a href="contato.html">Contato</a> </li>                               
                           </ul>
                        </nav>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </header>
   <!-- end header -->

   <!-- Conteúdo -->
   <div class="container my-5">
      <h1 class="text-center">🛒 Seu Carrinho</h1>
      <div id="carrinho" class="mt-4"></div>
      <div class="total h4 mt-3" id="total"></div>

      <div class="text-center mt-4">
         <button onclick="finalizarPedido()" class="btn btn-success btn-lg mb-2">
            <i class="fab fa-whatsapp"></i> Finalizar Pedido no WhatsApp
         </button>
         <br>
         <button onclick="window.location.href='cardapio.html'" class="btn btn-primary btn-lg mb-2">
            Adicionar Mais Itens
         </button>
         <button onclick="limparCarrinho()" class="btn btn-danger btn-lg mb-2">
            Limpar Carrinho
         </button>
      </div>
   </div>

   <script>
      function carregarCarrinho() {
         let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
         let container = document.getElementById('carrinho');
         let total = 0;
         container.innerHTML = "";

         if(carrinho.length === 0){
            container.innerHTML = "<p class='text-center'>Seu carrinho está vazio.</p>";
            document.getElementById('total').innerText = "";
            return;
         }

         carrinho.forEach((item, index) => {
            container.innerHTML += `
               <div class="item d-flex justify-content-between align-items-center">
                  <span>${item.produto} - ${item.sabor} - R$ ${item.preco.toFixed(2)}</span>
                  <div class="quantidade">
                     <button onclick="alterarQuantidade(${index}, -1)">-</button>
                     <span>${item.qtd}</span>
                     <button onclick="alterarQuantidade(${index}, 1)">+</button>
                     <button class="btn btn-vermelho btn-sm" onclick="removerItem(${index})">
                        <i class="fas fa-trash"></i>
                     </button>
                  </div>
               </div>`;
            total += item.preco * item.qtd;
         });

         document.getElementById('total').innerText = "Total: R$ " + total.toFixed(2);
      }

      function alterarQuantidade(index, delta) {
         let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
         carrinho[index].qtd += delta;
         if(carrinho[index].qtd <= 0){
            carrinho.splice(index,1);
         }
         localStorage.setItem('carrinho', JSON.stringify(carrinho));
         carregarCarrinho();
      }

      function removerItem(index) {
         let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
         carrinho.splice(index, 1);
         localStorage.setItem('carrinho', JSON.stringify(carrinho));
         carregarCarrinho();
      }

      function limparCarrinho() {
         if(confirm("Deseja realmente limpar todo o carrinho?")) {
            localStorage.removeItem('carrinho');
            carregarCarrinho();
         }
      }

      function finalizarPedido() {
         let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
         if(carrinho.length === 0){
            alert("Seu carrinho está vazio!");
            return;
         }

         let mensagem = "Olá, gostaria de fazer o seguinte pedido:%0A%0A";
         let total = 0;

         carrinho.forEach(item => {
            mensagem += `- ${item.produto} (${item.sabor}) x ${item.qtd} (R$ ${item.preco.toFixed(2)})%0A`;
            total += item.preco * item.qtd;
         });

         mensagem += `%0ATotal: R$ ${total.toFixed(2)}`;

         let numero = "5579998702117"; // Número do WhatsApp da empresa
         let url = `https://wa.me/${numero}?text=${mensagem}`;
         window.open(url, "_blank");
      }

      // Inicializa carrinho com qtd=1 se não existir
      let carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
      carrinho.forEach(item => {
         if(!item.qtd) item.qtd = 1;
      });
      localStorage.setItem('carrinho', JSON.stringify(carrinho));

      carregarCarrinho();
   </script>

   <!-- Footer -->
   <div class="container-fluid footer text-white mt-5 pt-5 px-0 position-relative overlay-top">
      <div class="row mx-0 pt-5 px-sm-3 px-lg-5 mt-4">
         <div class="col-lg-3 col-md-6 mb-5">
            <h4 class="text-white text-uppercase mb-4" style="letter-spacing: 3px;">Localização</h4>
            <p><i class="fa fa-map-marker" aria-hidden="true"></i> Orla da Atalaia</p>
            <p><i class="fa fa-phone"></i> (79) 9 99870-2117</p>
         </div>
         <div class="col-lg-3 col-md-6 mb-5">
            <h4 class="text-white text-uppercase mb-4" style="letter-spacing: 3px;">REDES SOCIAIS</h4>
            <div class="d-flex justify-content-start">
               <a class="btn btn-lg btn-outline-light btn-lg-square mr-2" href="http://facebook.com/al9870" target="_blank">
                  <i class="fab fa-facebook-f"></i>
               </a>
               <a class="btn btn-lg btn-outline-light btn-lg-square" href="https://www.instagram.com/pastel_do_miro/" target="_blank">
                  <i class="fab fa-instagram"></i>
               </a>
            </div>
         </div>
         <div class="col-lg-3 col-md-6 mb-5">
            <h4 class="text-white text-uppercase mb-4" style="letter-spacing: 3px;">FUNCIONAMENTO</h4>
            <h6 class="text-white text-uppercase">Seg - Dom</h6>
            <p>17 hrs - 23 hrs</p>
         </div>
         <div class="col-lg-3 col-md-6 mb-5">
            <h4 class="text-white text-uppercase mb-4" style="letter-spacing: 3px;">PAGAMENTOS</h4>
            <div class="d-flex flex-wrap">
               <img src="images/visa-seeklogo.png" alt="Visa" class="mr-2 mb-2" style="height:40px;">
               <img src="images/mastercard.png" alt="MasterCard" class="mr-2 mb-2" style="height:40px;">
               <img src="images/Elo_logo.png" alt="Elo" class="mr-2 mb-2" style="height:40px;">
               <img src="images/banese_card_logo.jpg" alt="Banese" class="mr-2 mb-2" style="height:40px;">
               <img src="images/hipercard.png" alt="hipercard" class="mr-2 mb-2" style="height:40px;">
            </div>
         </div>
      </div>
      <div class="container-fluid text-center text-white border-top mt-4 py-4 px-sm-3 px-md-5" style="border-color: rgba(256, 256, 256, .1) !important;">
         <p class="mb-2 text-white">Copyright &copy; <a class="font-weight-bold" href="#">Domain</a>. All Rights Reserved.</p>
         <p class="m-0 text-white">Designed by <a class="font-weight-bold" href="https://htmlcodex.com">HTML Codex</a></p>
      </div>
   </div>
</body>
</html>
